webpackJsonp([1],{"9n10":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")({name:"app"},a,!1,function(e){n("Sthj")},null,null).exports,r=n("/ocq"),s=n("//Fk"),l=n.n(s),u=n("Gu7T"),d=n.n(u),m=(n("PdmY"),n("jkKj")),h=n.n(m),c=(n("9OQl"),n("Bhwq"),{components:{},data:function(){return{option:{globe:{backgroundColor:"#000",environment:"static/image/starfield.jpg",baseTexture:"static/image/earth.jpg",shading:"color",layers:[{type:"blend",texture:""}],viewControl:{autoRotate:!1,zoomSensitivity:3,distance:220,alpha:0,beta:90,animation:!1,targetCoord:[108.56,34.15]}}},nation:{backgroundColor:{color:"#fff"},geo:{type:"map",map:"world",top:0,left:0,right:0,bottom:0,boundingCoords:[[-180,90],[180,-90]],itemStyle:{normal:{areaColor:"transparent",borderColor:"#fff"},emphasis:{areaColor:"yellow"}},label:{show:!1}},series:[]},china:{backgroundColor:{color:"#fff"},geo:{type:"map",map:"china",zoom:1.2,itemStyle:{normal:{color:"yellow"}}},series:[{name:"业务分布",type:"scatter",coordinateSystem:"geo",data:[],symbolSize:function(e){return e[2]/20},label:{normal:{formatter:"{b}:{c}",position:"right",show:!1},emphasis:{show:!0}},itemStyle:{normal:{color:"red"}}}]},earthIns:null,worldIns:null,nationIns:null,chinaIns:null,startLocation:[0,0],endLocation:[108.56,34.15],equipmentList:[{industryName:"韶关永盛山庄",value:[113.580262,24.808615,500],id:1,type:"normal",equipment:["中央空调#450","中央空调#551","能管设备#071","能管设备#071"],errEquipment:[{name:"中央空调#450",describe:"能耗过高",time:"02-01/11:02:45",type:"warning"}]},{industryName:"茂名汇丰酒店",value:[110.924231,21.670108,180],id:2,type:"warning",equipment:["中央空调#856","能管设备#789","能管设备#071"],errEquipment:[{name:"能管设备#789",describe:"数据异常",time:"02-01/11:02:45",type:"warning"}]},{industryName:"汕尾东鹏建材",value:[115.410654,22.816221,90],id:3,type:"danger",equipment:["中央空调#410","中央空调#645","能管设备#566"],errEquipment:[{name:"能管设备#566",describe:"CPU达到60%",time:"01-22/16:33:32",type:"danger"},{name:"中央空调#645",describe:"冷却水温度超标",time:"01-29/08:02:36",type:"warning"}]},{industryName:"梅州百胜电脑",value:[116.132646,24.30242,87],id:4,type:"danger",equipment:["中央空调#750","中央空调#895","能管设备#451"],errEquipment:[{name:"能管设备#451",describe:"服务器数据异常",time:"01-29/08:02:36",type:"danger"}]},{industryName:"广州东宝大厦",value:[113.317982,23.137914,87],id:5,type:"normal",equipment:["中央空调#D235","中央空调#D695","能管设备#D551"],errEquipment:[{name:"中央空调#D695",describe:"服务器数据异常",time:"01-29/08:02:36",type:"danger"}]}],errEquipment:[],industryName:"",chinaVisible:!1,timerId:null,legendPath:{normal:{name:"正常",path:"static/image/legend_normal.png"},warning:{name:"警告",path:"static/image/legend_warning.png"},danger:{name:"故障",path:"static/image/legend_danger.png"}},legendShow:!1,worldShow:!1,chinaShow:!1,hoverFlag:!0,loading:null,bdMap:null,markerLis:[]}},computed:{},created:function(){for(var e=0;e<this.equipmentList.length;e++)for(var t=this.equipmentList[e],n=0;n<t.errEquipment.length;n++){(a=t.errEquipment[n]).value=t.value,a.industryName=t.industryName,this.errEquipment.push(a)}for(var i=0;i<this.equipmentList.length;i++){var a,o={type:"scatter",coordinateSystem:"geo",geoIndex:0,data:[a=this.equipmentList[i]],symbol:"image://"+this.legendPath[a.type].path,symbolOffset:[0,"-50%"],symbolSize:27,label:{normal:{formatter:function(e,t,n){return e.data.equipment.length},show:!0},emphasis:{formatter:function(e,t,n){var i=["{name|"+e.data.industryName+"}","{hr|}"];return e.data.equipment.forEach(function(e,t){i.push("{equipment|"+(t+1)+"."+e+"}")}),i.join("\n")},color:"#000",rich:{name:{fontSize:16,color:"#000"},hr:{width:"100%",borderColor:"rgba(0,0,0,0.6)",borderWidth:1,height:0,lineHeight:12},equipment:{fontSize:16,color:"#000",lineHeight:20}},position:"top",backgroundColor:"#eee",borderColor:"#555",borderWidth:2,borderRadius:5,padding:10,show:!0}}};this.nation.series[i]=o}var r=document.createElement("canvas");this.nationIns=this.$echarts.init(r,null,{width:2048,height:1024}),this.nationIns.setOption(this.nation),this.nationIns.on("click",this.showChina)},mounted:function(){var e=this;this.earthIns=this.$echarts.init(document.getElementById("earth")),this.earthIns.showLoading(),this.option.globe.layers[0].texture=this.nationIns,this.earthIns.setOption(this.option),window.addEventListener("resize",e.echartsResize()),setTimeout(function(){e.earthIns.hideLoading(),e.legendShow=!0;var t=setTimeout(function(){e.toDeep()},2e3);window.addEventListener("click",function(){clearTimeout(t)}),setInterval(function(){if(e.hoverFlag){var t,n=e.errEquipment.splice(0,1);(t=e.errEquipment).push.apply(t,d()(n))}},2e3)},1e3)},beforeRouteLeave:function(e,t,n){window.removeEventListener("resize",this.echartsResize()),n()},methods:{getBase64Image:function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height),t.toDataURL("image/png")},toDeep:function(e){var t=this;null==this.worldIns&&this.earthIns.setOption({globe:{viewControl:{autoRotate:!1,distance:70,animation:!0,animationDurationUpdate:3e3,animationEasingUpdate:"linear",targetCoord:[113.31,23.14]}}});var n=t.bdMap?10:3e3;setTimeout(function(){t.worldShow=!0,t.$nextTick(function(){document.querySelector("#earthContent .legend_industry ul").classList.add("hidden"),t.bdMap||(t.bdMap=new h.a.Map("china"),t.bdMap.addControl(new h.a.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_SATELLITE_MAP]})),t.bdMap.enableScrollWheelZoom(!0),t.bdMap.enableDoubleClickZoom(!0),t.bdMap.enableContinuousZoom(!0),t.bdMap.centerAndZoom(new h.a.Point(108.56,34.15),5));var n=0;t.markerLis.forEach(function(e){t.bdMap.removeOverlay(e),n++});for(var i=360,a=0,o=360,r=0,s=0;s<t.equipmentList.length;s++){var l=t.equipmentList[s];e||(l.value[0]<=i&&(i=l.value[0]),l.value[0]>=a&&(a=l.value[0]),l.value[1]<=o&&(o=l.value[1]),l.value[1]>=r&&(r=l.value[1]));var u,d,m,c,p,g,v=(i+a)/2,f=(o+r)/2;if(!e||e&&e.industryName==l.industryName)if("break"===function(){var n=new h.a.Point(l.value[0],l.value[1]);t.equipmentList[s].point=n,u=new h.a.Icon(t.legendPath[l.type].path,new h.a.Size(32,35),{imageSize:new h.a.Size(32,35),anchor:new h.a.Size(16,35)});var i=new h.a.Marker(n,{icon:u});i.addEventListener("click",function(e){window.open("./yanshi/jiliangqiju.html")}),d={width:0,height:0,offset:new h.a.Size(0,0),title:l.industryName},m="";for(var a=0;a<l.equipment.length;a++)c=l.equipment[a],m+="<p>"+(a+1)+" . "+c+"</p>";if(p=new h.a.InfoWindow(m,d),i.addEventListener("mouseover",function(e){i.openInfoWindow(p,i)}),i.addEventListener("mouseout",function(e){}),t.markerLis.push(i),t.bdMap.addOverlay(i),(g=new h.a.Label(l.industryName,{offset:new h.a.Size(20,-10)})).setStyle({cursor:"pointer"}),g.addEventListener("click",function(e){window.open("./yanshi/jiliangqiju.html")}),i.setLabel(g),e&&e.industryName==l.industryName)return"break"}())break}e?0==n?t.bdMap.centerAndZoom(new h.a.Point(e.value[0],e.value[1]),8):t.bdMap.panTo(new h.a.Point(e.value[0],e.value[1])):t.bdMap.centerAndZoom(new h.a.Point(v,f),8)})},n)},toErr:function(e){this.toDeep(e)},showChina:function(e){e.name&&"China"==e.name?this.toDeep():this.equipmentList.some(function(t){return t.industryName==e.data.industryName})&&window.open("./yanshi/jiliangqiju.html")},echartsResize:function(){var e=this;return function(){e.throttle(e.earthIns.resize(),100),e.chinaVisible&&e.chinaIns&&e.throttle(e.chinaIns.resize(),100)}},throttle:function(e,t){var n=this;return n.timerId=null,function(){clearTimeout(n.timerId),n.timerId=setTimeout(function(){e()},t)}},industryChange:function(e){for(var t=0;t<this.equipmentList.length;t++){var n=this.equipmentList[t];if(e==n.id){this.toErr(n);break}}},newPromise:function(e,t){return new l.a(function(t,n){setTimeout(t(),e)})}},watch:{}}),p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"earthContent"}},[n("div",{key:"earth",staticClass:"list-item",attrs:{id:"earth"}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.worldShow,expression:"worldShow"}],key:"china",attrs:{id:"china"}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.legendShow,expression:"legendShow"}],attrs:{id:"legend"}},e._l(e.legendPath,function(t,i){return n("div",{key:i},[n("img",{attrs:{src:t.path,alt:"key",draggable:"false"}}),e._v(" "),n("span",{class:t.type,domProps:{textContent:e._s(t.name)}})])})),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.legendShow,expression:"legendShow"}],staticClass:"legend_industry"},[n("ul",{on:{mouseover:function(t){e.hoverFlag=!1},mouseout:function(t){e.hoverFlag=!0}}},e._l(e.errEquipment,function(t,i){return n("li",{key:t.id,attrs:{title:t.industryName},on:{click:function(n){e.toErr(t)}}},[n("p",{staticClass:"name",domProps:{textContent:e._s(t.name)}}),e._v(" "),n("p",{class:["describe",t.type],domProps:{textContent:e._s(t.describe)}}),e._v(" "),n("p",{staticClass:"time",domProps:{textContent:e._s(t.time)}})])}))]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.legendShow,expression:"legendShow"}],staticClass:"legend_input"},[n("el-select",{attrs:{filterable:"",placeholder:"搜索企业"},on:{change:e.industryChange},model:{value:e.industryName,callback:function(t){e.industryName=t},expression:"industryName"}},e._l(e.equipmentList,function(e,t){return n("el-option",{key:e.id,attrs:{label:e.industryName,value:e.id}})}))],1),e._v(" "),n("el-dialog",{staticStyle:{"margin-top":"10px"},attrs:{title:"提示",visible:e.chinaVisible,width:"90%",height:"100%"},on:{"update:visible":function(t){e.chinaVisible=t}}})],1)},staticRenderFns:[]};var g=n("VU/8")(c,p,!1,function(e){n("gNYs")},null,null).exports;i.default.use(r.a);var v=new r.a({routes:[{path:"/",name:"HelloWorld",component:g}]}),f=n("XLwt"),w=n.n(f),y=n("zL8q"),b=n.n(y),q=n("mtWM"),C=n.n(q);n("q8zI"),n("9n10"),n("qJEI");i.default.use(b.a),i.default.prototype.$echarts=w.a,i.default.prototype.$axios=C.a,i.default.config.productionTip=!1,new i.default({el:"#app",router:v,template:"<App/>",components:{App:o}})},Sthj:function(e,t){},gNYs:function(e,t){},jkKj:function(e,t){e.exports=BMap},q8zI:function(e,t){},qJEI:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.11b7d1939f11b797a774.js.map